<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sooraj Flappy Game</title>

<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #6ec6d1;
    font-family: Arial, Helvetica, sans-serif;
  }

  canvas {
    display: block;
    margin: 0 auto;
    background: #6ec6d1;
  }

  .tap {
    position: absolute;
    bottom: 140px;
    left: 50%;
    transform: translateX(-50%);
    color: red;
    font-weight: bold;
    font-size: 22px;
    background: white;
    padding: 6px 14px;
    border-radius: 6px;
  }

  .ready {
    position: absolute;
    top: 120px;
    width: 100%;
    text-align: center;
    font-size: 42px;
    font-weight: bold;
    color: #f7b733;
    text-shadow: 3px 3px #000;
  }

  .scoreBox {
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    border: 3px solid black;
    padding: 5px 18px;
    font-size: 24px;
    font-weight: bold;
  }
</style>
</head>

<body>

<div class="ready" id="readyText">Get Ready</div>
<div class="tap" id="tapText">TAP</div>
<div class="scoreBox" id="scoreBox">0</div>

<canvas id="game" width="360" height="640"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let gameStarted = false;
let score = 0;

const bird = {
  x: 80,
  y: 300,
  r: 14,
  vy: 0
};

const gravity = 0.5;
const jump = -8;

// draw bird
function drawBird() {
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(bird.x, bird.y, bird.r, 0, Math.PI * 2);
  ctx.fill();
}

// update
function update() {
  if (gameStarted) {
    bird.vy += gravity;
    bird.y += bird.vy;

    if (bird.y > canvas.height - bird.r) reset();
    if (bird.y < bird.r) bird.y = bird.r;
  }
}

// draw
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBird();
}

// reset
function reset() {
  bird.y = 300;
  bird.vy = 0;
  score = 0;
  gameStarted = false;
  document.getElementById("readyText").style.display = "block";
  document.getElementById("tapText").style.display = "block";
  document.getElementById("scoreBox").innerText = score;

  const msg = new SpeechSynthesisUtterance("കളി അവസാനിച്ചു");
  msg.lang = "ml-IN";
  speechSynthesis.cancel();
  speechSynthesis.speak(msg);
}

// tap / click / space
function flap() {
  if (!gameStarted) {
    gameStarted = true;
    document.getElementById("readyText").style.display = "none";
    document.getElementById("tapText").style.display = "none";
  }
  bird.vy = jump;
  score++;
  document.getElementById("scoreBox").innerText = score;
}

document.addEventListener("keydown", e => {
  if (e.code === "Space") flap();
});

canvas.addEventListener("mousedown", flap);
canvas.addEventListener("touchstart", flap);

// loop
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
